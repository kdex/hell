jobs:
  test:
    runs-on: ${{ matrix.os }}
    steps:
    - uses: actions/checkout@v2
    - name: Build the project
      run: ls -ahl && .github/workflows/main.sh ${{ matrix.os }} ${{ matrix.build-type }} ${{ matrix.cc }}
      shell: bash
    - name: Test the project
      run: cd build && CTEST_OUTPUT_ON_FAILURE=1 ctest -j$(nproc)
      shell: bash
    strategy:
      matrix:
        os: [macOS-latest, ubuntu-latest, windows-latest]
        cc: [clang, gcc]
        build-type: [Debug, Release]
name: build
on: push